---
description: Next.js å°ˆæ¡ˆé–‹ç™¼èˆ‡ AI å”ä½œæŒ‡å—ã€‚ç•¶éœ€è¦é–‹ç™¼æ–°é é¢ã€æ–°åŠŸèƒ½æˆ–ä¿®æ”¹ç¾æœ‰åŠŸèƒ½æ™‚ï¼Œå¿…é ˆå¼·åˆ¶èª¿ç”¨æ­¤è¦å‰‡ã€‚æœ¬æŒ‡å—ç”¨æ–¼ç¢ºä¿æ‰€æœ‰é–‹ç™¼å·¥ä½œï¼ˆç„¡è«–ç”±äººé¡æˆ– AI å®Œæˆï¼‰å‡éµå¾ªçµ±ä¸€çš„æ¶æ§‹ã€è¨­è¨ˆæ¨¡å¼èˆ‡é–‹ç™¼æµç¨‹ã€‚å…¶æ ¸å¿ƒæ˜¯æ–°åŠŸèƒ½é–‹ç™¼SOPï¼Œæ¶µè“‹å¾åƒè€ƒæ—¢æœ‰å¯¦ç¾ã€è¨­å®šSEO/GAã€åˆ°è¤‡ç”¨é€šç”¨çµ„ä»¶çš„å…¨éç¨‹ï¼Œæ—¨åœ¨ç¢ºä¿å°ˆæ¡ˆç¨‹å¼ç¢¼çš„é«˜åº¦ä¸€è‡´æ€§ã€‚
globs: 
alwaysApply: false
---
# Next.js å°ˆæ¡ˆé–‹ç™¼èˆ‡ AI å”ä½œæŒ‡å—

## ğŸš¨ æœ€é«˜æŒ‡å°åŸå‰‡ï¼šè¤‡åˆ»æ—¢æœ‰å¯¦ç¾ (Replicate Existing Implementations)

**æ­¤ç‚ºæœ¬å°ˆæ¡ˆä¸å¯å‹•æ–çš„æ ¸å¿ƒåŸå‰‡ã€‚** æ‰€æœ‰æ–°åŠŸèƒ½ã€æ–°é é¢ã€æ–°çµ„ä»¶çš„é–‹ç™¼ï¼Œç„¡è«–ç”±äººé¡æˆ– AI åŸ·è¡Œï¼Œéƒ½**å¿…é ˆ**ä»¥è¤‡è£½å’Œèª¿æ•´ç¾æœ‰ç›¸ä¼¼åŠŸèƒ½çš„å¯¦ç¾ç‚ºåŸºç¤ã€‚æ­¤èˆ‰æ—¨åœ¨ç¢ºä¿å°ˆæ¡ˆåœ¨è¦–è¦ºé¢¨æ ¼ã€ç¨‹å¼ç¢¼æ¶æ§‹ã€ä½¿ç”¨è€…é«”é©—å’Œé–‹ç™¼æ•ˆç‡ä¸Šçš„çµ•å°ä¸€è‡´æ€§ã€‚

**ç¦æ­¢é‡é€ è¼ªå­ (Do Not Reinvent the Wheel)ã€‚** åœ¨æ’°å¯«ä»»ä½•æ–°ç¨‹å¼ç¢¼ä¹‹å‰ï¼Œé¦–è¦ä»»å‹™æ˜¯ç†è§£ä¸¦è¤‡ç”¨å·²æœ‰çš„è¨­è¨ˆæ¨¡å¼èˆ‡é€šç”¨çµ„ä»¶ã€‚æ•´é«”æ¶æ§‹è«‹åƒè€ƒ `project-architecture.mdc`ã€‚


---

## âš™ï¸ æ–°åŠŸèƒ½/é é¢é–‹ç™¼æ¨™æº–ä½œæ¥­ç¨‹åº (SOP)

ç•¶æ¥åˆ°ä¸€å€‹æ–°çš„é–‹ç™¼éœ€æ±‚æ™‚ï¼Œ**å¿…é ˆ**åš´æ ¼éµå¾ªä»¥ä¸‹æª¢æŸ¥æ¸…å–® (Checklist)ï¼š

### 1. éœ€æ±‚åˆ†æèˆ‡åƒè€ƒå®šä½ (Analyze & Locate)
- **[ ] å°‹æ‰¾ç›¸ä¼¼åŠŸèƒ½**ï¼šåœ¨ `src/app` å’Œ `src/components` ç›®éŒ„ä¸‹ï¼Œå°‹æ‰¾ä¸€å€‹åŠŸèƒ½æˆ–é é¢çµæ§‹æœ€ç›¸ä¼¼çš„ç¾æœ‰ç¯„ä¾‹ã€‚
    - *ç¯„ä¾‹ï¼šè¦é–‹ç™¼ã€Œç”¢å“æŸ¥è©¢ã€é é¢ï¼Œæ‡‰å„ªå…ˆåƒè€ƒ `app/company/search/` çš„çµæ§‹ã€‚*
- **[ ] ç¢ºèªæ¸²æŸ“ç­–ç•¥**ï¼šæ ¹æ“šéœ€æ±‚èˆ‡ `project-architecture.mdc` ä¸­å®šç¾©çš„æ¸²æŸ“æ¨¡å‹ï¼Œåƒè€ƒç¾æœ‰ç¯„ä¾‹æ±ºå®šé é¢çš„æ¸²æŸ“ç­–ç•¥ (SSR, SSG, ISR, CSR)ï¼Œä¸¦åœ¨ `page.tsx` ä¸­æ­£ç¢ºè¨­å®šã€‚

### 2. çµæ§‹èˆ‡é é¢è¨­å®š (Structure & Metadata)
- **[ ] è¤‡è£½èˆ‡ä¿®æ”¹çµæ§‹**ï¼šè¤‡è£½åƒè€ƒç¯„ä¾‹çš„ç›®éŒ„çµæ§‹èˆ‡æª”æ¡ˆ (`page.tsx`, `layout.tsx` ç­‰)ã€‚
- **[ ] è¨­å®šé é¢å…ƒæ•¸æ“š (SEO)**ï¼š**å¿…é ˆ**éµå¾ª `seo-optimization-guide.mdc` ä¸­çš„è¦ç¯„ä¾†è¨­å®šã€‚
    - **å¿…é ˆ**å¾ `src/config/pageTitles.ts` å°å…¥ `staticTitles` æˆ– `dynamicTitles` ä¾†è¨­å®šé é¢ `title`ã€‚
    - **å¿…é ˆ**ç‚ºé é¢æä¾›ç²¾æº–çš„ `description` å’Œ `keywords`ã€‚
    - **ç¦æ­¢**åœ¨ `metadata` ä¸­ç¡¬ç·¨ç¢¼ä»»ä½•æ¨™é¡Œå­—ä¸²ã€‚
    - *ç¯„ä¾‹ï¼š*
      ```typescript
      import { staticTitles } from '@/config/pageTitles';
      import type { Metadata } from 'next';

      export const metadata: Metadata = {
        title: staticTitles.faq,
        description: 'é—œæ–¼ Business Magnifier çš„å¸¸è¦‹å•é¡Œè§£ç­”...',
        keywords: ['å¸¸è¦‹å•é¡Œ', 'FAQ', 'ä¼æ¥­æœå°‹'],
      };
      ```

### 3. çµ„ä»¶èˆ‡æ¨£å¼ (Component & Style)
- **[ ] è¤‡ç”¨é€šç”¨çµ„ä»¶**ï¼š
    - **å„ªå…ˆ**ä½¿ç”¨ `src/components/ui/` ä¸­çš„åŸºç¤ UI çµ„ä»¶ (å¦‚ `Button`, `Input`, `Card`)ã€‚
    - **å„ªå…ˆ**ä½¿ç”¨ `src/components/common/` ä¸­çš„é€šç”¨åŠŸèƒ½çµ„ä»¶ (å¦‚ `Loading`, `ErrorMessage`)ã€‚
- **[ ] éµå¾ªè¨­è¨ˆé¢¨æ ¼**ï¼šæ–°çµ„ä»¶çš„è¦–è¦ºè¨­è¨ˆå’Œ Tailwind CSS ç”¨æ³•ï¼Œ**å¿…é ˆ**ç¬¦åˆ `ui-ux-aesthetic-guide.mdc` çš„ç¾å­¸æ¨™æº–ï¼Œä¸¦èˆ‡åƒè€ƒç¯„ä¾‹ä¿æŒè¦–è¦ºä¸Šçš„ä¸€è‡´æ€§ã€‚

### 4. æ¥­å‹™é‚è¼¯èˆ‡è³‡æ–™è™•ç† (Business Logic & Data)
- **[ ] è¤‡ç”¨æ¥­å‹™é‚è¼¯**ï¼šå¦‚æœæ–°åŠŸèƒ½éœ€è¦é¡ä¼¼çš„å¾Œç«¯è³‡æ–™è™•ç†ï¼Œ**æ‡‰**å„ªå…ˆä½¿ç”¨æˆ–æ“´å…… `src/lib/` ä¸­å°æ‡‰æ¨¡çµ„çš„å‡½å¼ã€‚è³‡æ–™åº«æ“ä½œéœ€éµå¾ª `mongodb-architecture-guide.mdc`ã€‚
- **[ ] éµå¾ª API è¦ç¯„**ï¼šè‹¥éœ€æ–°å¢ API ç«¯é»ï¼Œå…¶è«‹æ±‚/å›æ‡‰æ ¼å¼**å¿…é ˆ**ç¬¦åˆ `src/app/api/` ä¸‹çš„ç¾æœ‰è¦ç¯„ã€‚

### 5. åˆ†æèˆ‡è¿½è¹¤ (Analytics & Tracking)
- **[ ] æ•´åˆ Google Analytics**ï¼š
    - ç¢ºä¿ `RootLayout` ä¸­çš„ `GoogleAnalytics` çµ„ä»¶å­˜åœ¨ã€‚
    - å°æ–¼é—œéµä½¿ç”¨è€…äº’å‹•ï¼ˆå¦‚è¡¨å–®æäº¤ã€é‡è¦æŒ‰éˆ•é»æ“Šï¼‰ï¼Œ**å¿…é ˆ**èª¿ç”¨ `trackBusinessEvents` æˆ–å…¶ä»– GA äº‹ä»¶è¿½è¹¤å‡½å¼ã€‚è©³ç´°ç­–ç•¥è«‹åƒé–± `google-analytics-strategy.mdc`ã€‚

### 6. ç‰ˆæœ¬æ§åˆ¶ (Version Control)
- **[ ] éµå¾ª Git å·¥ä½œæµ**: æ‰€æœ‰é–‹ç™¼éç¨‹ä¸­çš„æš«å­˜èˆ‡æœ€çµ‚æäº¤ï¼Œéƒ½**å¿…é ˆ**åš´æ ¼éµå¾ª `git-workflow-guide.mdc` ä¸­å®šç¾©çš„ `WIP` å’Œ `Release` æµç¨‹ã€‚


---

## å°ˆæ¡ˆæ¦‚è¦½

- **å®šä½**: æ¡ç”¨ Next.js 14 App Router çš„ SEO å„ªåŒ–ä¼æ¥­è³‡æ–™æŸ¥è©¢å¹³å°ã€‚
- **æ ¸å¿ƒåŸå‰‡**:
    - **æ¶æ§‹ä¸€è‡´æ€§**: ç¶­è­·çµ±ä¸€çš„å°ˆæ¡ˆçµæ§‹èˆ‡è¨­è¨ˆæ¨¡å¼ã€‚åƒè€ƒ `project-architecture.mdc`ã€‚
    - **æ—¢æœ‰å¯¦ç¾è¤‡åˆ»**: æ–°åŠŸèƒ½é–‹ç™¼éœ€åƒç…§ç¾æœ‰ç›¸ä¼¼åŠŸèƒ½çš„å¯¦ç¾ï¼Œç¢ºä¿é¢¨æ ¼ä¸€è‡´ã€‚
- **æŠ€è¡“æ£§èˆ‡ç¾æ³**:
    - **ä¸»åˆ†æ”¯**: `main`
    - **è³‡æ–™åº«**: MongoDB (è¦‹ `mongodb-architecture-guide.mdc`)
    - **é–‹ç™¼ç’°å¢ƒ**: Docker
    - **ç¨‹å¼ç¢¼å“è³ª**: ESLint + Prettier


---

## ç›®éŒ„çµæ§‹

### æ ¹ç›®éŒ„çµæ§‹
`next/` ç‚ºä¸»è¦é–‹ç™¼ç›®éŒ„ï¼Œä»£è¡¨æ¡ç”¨ Next.js 14 App Router çš„æ–°ä¸€ä»£æ‡‰ç”¨ã€‚`legacy/` ç‚ºèˆŠç‰ˆ Vite æ‡‰ç”¨ï¼Œä½œç‚ºåŠŸèƒ½é·ç§»èˆ‡æ¨£å¼åƒè€ƒçš„ä¾æ“šã€‚
```
Business-Magnifier/
â”œâ”€â”€ next/      # ä¸»è¦ Next.js æ‡‰ç”¨ (é–‹ç™¼é‡å¿ƒ)
â”œâ”€â”€ legacy/    # èˆŠç‰ˆ Vite æ‡‰ç”¨ (åƒè€ƒç”¨)
â””â”€â”€ .cursor/   # AI åŠ©æ‰‹é…ç½® (è¦å‰‡ç®¡ç†è¦‹ documentation-management.mdc)
```

### `src` ç›®éŒ„çµæ§‹
æ¡åŠŸèƒ½è·è²¬åˆ†å±¤è¨­è¨ˆï¼Œç¢ºä¿ç¨‹å¼ç¢¼è·è²¬æ¸…æ™°ã€‚
```
src/
â”œâ”€â”€ app/         # App Router é é¢èˆ‡ API è·¯ç”±
â”œâ”€â”€ components/  # React å…ƒä»¶ (UI, æ¥­å‹™é‚è¼¯)
â”œâ”€â”€ lib/         # æ ¸å¿ƒå‡½å¼åº« (è³‡æ–™åº«, API å°è£, æ¥­å‹™é‚è¼¯)
â”œâ”€â”€ hooks/       # è‡ªå®šç¾© React Hooks
â”œâ”€â”€ types/       # TypeScript å‹åˆ¥å®šç¾©
â”œâ”€â”€ utils/       # é€šç”¨å·¥å…·å‡½å¼
â”œâ”€â”€ data/        # éœæ…‹è³‡æ–™èˆ‡é…ç½®
â””â”€â”€ config/      # æ‡‰ç”¨ç¨‹å¼é…ç½®
```

### `app` ç›®éŒ„èˆ‡è·¯ç”±çµæ§‹
æ¡åŠŸèƒ½æ¨¡çµ„åŒ–çµ„ç¹”ï¼Œå„åŠŸèƒ½ (å¦‚ `company`, `tender`, `aitool`) è‡ªæˆæ¨¡çµ„ã€‚
```
app/
â”œâ”€â”€ company/          # ä¼æ¥­æŸ¥è©¢æ¨¡çµ„
â”‚   â”œâ”€â”€ search/       #   - æœå°‹é  (SSR)
â”‚   â””â”€â”€ [id]/         #   - è©³æƒ…é  (ISR)
â”œâ”€â”€ tender/           # æ¨™æ¡ˆæŸ¥è©¢æ¨¡çµ„
â”œâ”€â”€ aitool/           # AI å·¥å…·æ¨¡çµ„
â”œâ”€â”€ api/              # API è·¯ç”±
â”œâ”€â”€ faq/              # å¸¸è¦‹å•é¡Œé é¢ (SSG)
â””â”€â”€ feedback/         # ä½¿ç”¨è€…å›é¥‹é é¢ (CSR)
```


---

## è·¯ç”±èˆ‡æ¸²æŸ“ç­–ç•¥

### 3.1 é é¢æª”æ¡ˆæ…£ä¾‹
- **é é¢**: `page.tsx`
- **ç‰ˆé¢**: `layout.tsx`
- **è¼‰å…¥**: `loading.tsx`
- **éŒ¯èª¤**: `error.tsx`
- **404**: `not-found.tsx`

### 3.2 è·¯ç”±çµæ§‹
- **éœæ…‹è·¯ç”±**: `/company/search`, `/aitool/search`, `/faq`
- **å‹•æ…‹è·¯ç”±**: `/company/[id]`, `/tender/[id]`, `/aitool/detail/[id]`

### 3.3 æ¸²æŸ“ç­–ç•¥
- **SSG (éœæ…‹ç”Ÿæˆ)**: å…§å®¹ä¸å¸¸è®Šå‹•çš„é é¢ (FAQ, éš±ç§æ”¿ç­–, AI å·¥å…·è©³æƒ…é )ã€‚
- **ISR (å¢é‡éœæ…‹å†ç”Ÿ)**: ç†±é–€ä½†éœ€å®šæœŸæ›´æ–°çš„é é¢ (ä¼æ¥­/æ¨™æ¡ˆè©³æƒ…é )ã€‚
- **SSR (ä¼ºæœå™¨ç«¯æ¸²æŸ“)**: éœ€è¦å³æ™‚è³‡æ–™çš„é é¢ (æœå°‹çµæœé )ã€‚
- **CSR (å®¢æˆ¶ç«¯æ¸²æŸ“)**: é«˜åº¦äº’å‹•çš„å…ƒä»¶ (å›é¥‹è¡¨å–®, è¤‡é›œåœ–è¡¨)ã€‚


---

## API è¨­è¨ˆè¦ç¯„

### 4.1 API è·¯ç”±çµæ§‹ (`src/app/api/`)
API è·¯ç”±ä¾åŠŸèƒ½æ¨¡çµ„åŠƒåˆ†ï¼Œä¿æŒçµæ§‹æ¸…æ™°ã€‚
```
api/
â”œâ”€â”€ company/
â”‚   â”œâ”€â”€ route.ts           # GET /api/company
â”‚   â””â”€â”€ [id]/route.ts      # GET /api/company/[id]
â”œâ”€â”€ aitool/
â”‚   â”œâ”€â”€ route.ts           # GET /api/aitool
â”‚   â”œâ”€â”€ search/route.ts    # POST /api/aitool/search
â”‚   â””â”€â”€ [id]/route.ts      # GET /api/aitool/[id]
â”œâ”€â”€ feedback/route.ts      # POST /api/feedback
â””â”€â”€ health/route.ts        # GET /api/health
```

### 4.2 API è¨­è¨ˆåŸå‰‡
- **RESTful**: ä½¿ç”¨æ¨™æº– HTTP æ–¹æ³• (GET, POST, PUT/PATCH, DELETE)ã€‚
- **çµ±ä¸€å›æ‡‰æ ¼å¼**: API å›æ‡‰éœ€éµå¾ªæ¨™æº–çš„æˆåŠŸèˆ‡å¤±æ•—çµæ§‹ï¼Œä¾¿æ–¼å‰ç«¯è™•ç†ã€‚
```typescript
// æˆåŠŸå›æ‡‰
interface APIResponse<T> {
  success: true;
  data: T;
  message?: string;
  pagination?: object;
}

// éŒ¯èª¤å›æ‡‰
interface APIError {
  success: false;
  error: string;
  code?: string;
}
```


---

## å…ƒä»¶æ¶æ§‹

### 5.1 å…ƒä»¶ç›®éŒ„çµæ§‹ (`src/components/`)
```
components/
â”œâ”€â”€ ui/         # åŸºç¤ UI å…ƒä»¶ (Button, Input)ï¼Œç„¡æ¥­å‹™é‚è¼¯
â”œâ”€â”€ layout/     # ç‰ˆé¢é…ç½®å…ƒä»¶ (Header, Footer)
â”œâ”€â”€ business/   # ä¼æ¥­æ¥­å‹™ç›¸é—œå…ƒä»¶
â”œâ”€â”€ aitool/     # AI å·¥å…·æ¥­å‹™ç›¸é—œå…ƒä»¶ (AIToolCard)
â”œâ”€â”€ common/     # é€šç”¨åŠŸèƒ½å…ƒä»¶ (Loading, ErrorBoundary)
â””â”€â”€ seo/        # SEO å°ˆç”¨å…ƒä»¶ (MetaTags, StructuredData)
```

### 5.2 å…ƒä»¶è¨­è¨ˆèˆ‡è¤‡ç”¨
- **åˆ†å±¤**: åŸºç¤ UI å…ƒä»¶ â†’ æ¥­å‹™å…ƒä»¶ â†’ é é¢å°ˆç”¨å…ƒä»¶ã€‚
- **è¤‡åˆ»åŸå‰‡**: é–‹ç™¼æ–°åŠŸèƒ½æ™‚ï¼Œå„ªå…ˆè¤‡ç”¨æˆ–åƒè€ƒç¾æœ‰ç›¸ä¼¼å…ƒä»¶ï¼Œä»¥ä¿æŒé¢¨æ ¼ä¸€è‡´ã€‚
    - **ç¯„ä¾‹**: `AIToolCard` åƒè€ƒ `BusinessCard` è¨­è¨ˆï¼›`AIToolList` åƒè€ƒ `BusinessList`ã€‚


---

## è³‡æ–™èˆ‡ç‹€æ…‹ç®¡ç†

### 6.1 è³‡æ–™å±¤çµæ§‹ (`src/lib/`)
è³‡æ–™åº«é€£ç·šã€Mongoose æ¨¡å‹èˆ‡æ ¸å¿ƒæ¥­å‹™é‚è¼¯å­˜æ”¾æ–¼æ­¤ã€‚
```
lib/
â”œâ”€â”€ db/
â”‚   â”œâ”€â”€ connection.ts   # è³‡æ–™åº«é€£ç·šç®¡ç†
â”‚   â””â”€â”€ models/         # Mongoose æ¨¡å‹ (AITool, Company)
â”œâ”€â”€ aitool/             # AI å·¥å…·ç›¸é—œæ¥­å‹™é‚è¼¯
â”œâ”€â”€ company/            # ä¼æ¥­ç›¸é—œæ¥­å‹™é‚è¼¯
â””â”€â”€ tender/             # æ¨™æ¡ˆç›¸é—œæ¥­å‹™é‚è¼¯
```

### 6.2 ç‹€æ…‹ç®¡ç†ç­–ç•¥
- **æœ¬åœ°ç‹€æ…‹**: React Hooks (`useState`, `useReducer`) ç”¨æ–¼å…ƒä»¶å…§éƒ¨ç‹€æ…‹ã€‚
- **ä¼ºæœå™¨ç‹€æ…‹**: SWR æˆ– React Query (æ¨è–¦)ï¼Œç”¨æ–¼ç®¡ç†èˆ‡å¿«å– API è³‡æ–™ã€‚
- **å…¨åŸŸç‹€æ…‹**: Context APIï¼Œç”¨æ–¼ä½¿ç”¨è€…è¨­å®šã€ä¸»é¡Œç­‰è·¨å…ƒä»¶å…±äº«çš„ç‹€æ…‹ã€‚


---

## é–‹ç™¼ç’°å¢ƒèˆ‡å“è³ªä¿è­‰

### 7.1 Docker é–‹ç™¼æµç¨‹
ä½¿ç”¨ `docker-compose.yml` ç®¡ç†é–‹ç™¼ç’°å¢ƒ (Next.js, MongoDB)ã€‚
- `npm run start:dev`: ä¸€éµå•Ÿå‹•æ‰€æœ‰æœå‹™ã€‚
- `npm run db:backup`: å‚™ä»½è³‡æ–™åº«ã€‚
- `npm run stop`: åœæ­¢ä¸¦æ¸…ç†ç’°å¢ƒã€‚

### 7.2 ç¨‹å¼ç¢¼å“è³ª
- **è‡ªå‹•åŒ–**: ä½¿ç”¨ Prettier é€²è¡Œæ ¼å¼åŒ–ï¼ŒESLint é€²è¡Œç¨‹å¼ç¢¼é¢¨æ ¼èˆ‡éŒ¯èª¤æª¢æŸ¥ã€‚
- **TypeScript**: æ‰€æœ‰ç¨‹å¼ç¢¼éœ€æœ‰åš´æ ¼çš„å‹åˆ¥å®šç¾©ï¼Œç‰¹åˆ¥æ˜¯ API å›æ‡‰èˆ‡è³‡æ–™æ¨¡å‹ã€‚
```typescript
// ç¯„ä¾‹: AI å·¥å…·è³‡æ–™æ¨¡å‹å‹åˆ¥
interface AITool {
  id: string;
  name: string;
  description: string;
  category: 'productivity' | 'creative' | 'analysis' | 'automation';
  tags: string[];
  url: string;
  isActive: boolean;
}
```


---